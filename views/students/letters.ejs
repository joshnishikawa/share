<%- include('../head.ejs') -%>
<%- include('navbar.ejs') -%>

<div class="container-fluid">
  <div class="row">

    <div class="col-sm mb-1">
      <a href="letters/haystack" class="btn btn-light border border-3 border-success shadow w-100 h-100 YM">
        <h5>Haystack</h5>
        <div class="container text-center">
          <div class="row">
            <div class="col p-1">p</div>
            <div class="col p-1"><div class="rounded-3 alert-primary">b</div></div>
            <div class="col p-1">p</div>
            <div class="col p-1">d</div>
            <div class="col p-1">d</div>
            <div class="col p-1"><div class="rounded-3 alert-primary">b</div></div>
          </div>
          <div class="row">
            <div class="col p-1"><div class="rounded-3 alert-primary">b</div></div>
            <div class="col p-1">p</div>
            <div class="col p-1">d</div>
            <div class="col p-1"><div class="rounded-3 alert-primary">b</div></div>
            <div class="col p-1">h</div>
            <div class="col p-1">h</div>
          </div>
          <div class="row">
            <div class="col p-1">d</div>
            <div class="col p-1">h</div>
            <div class="col p-1"><div class="rounded-3 alert-primary">b</div></div>
            <div class="col p-1">p</div>
            <div class="col p-1">h</div>
            <div class="col p-1">d</div>
          </div>
          <div class="row">
            <div class="col p-1">p</div>
            <div class="col p-1">h</div>
            <div class="col p-1">p</div>
            <div class="col p-1">d</div>
            <div class="col p-1"><div class="rounded-3 alert-primary">b</div></div>
            <div class="col p-1">h</div>
          </div>
        </div>
      </a>
    </div>

    <div class="col-sm mb-1">
      <a href="letters/pairs" class="btn btn-light border border-3 border-success shadow w-100 h-100 YM">
        <h5>Find Pairs</h5>
        <div class="container text-center">
          <div class="row">
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="w-100 h-100 rounded-3 shadow-sm">L</div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
          </div>
          <div class="row">
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="w-100 h-100 rounded-3 shadow-sm">R</div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="w-100 h-100 rounded-3 shadow-sm">F</div></div>
            <div class="col p-1"><div class="w-100 h-100 rounded-3 shadow-sm">V</div></div>
          </div>
          <div class="row">
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="w-100 h-100 rounded-3 shadow-sm">V</div></div>
            <div class="col p-1"><div class="w-100 h-100 rounded-3 shadow-sm">R</div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
          </div>
          <div class="row">
            <div class="col p-1"><div class="w-100 h-100 rounded-3 shadow-sm">L</div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="w-100 h-100 rounded-3 shadow-sm">F</div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
            <div class="col p-1"><div class="alert-primary border border-primary rounded-3 shadow-sm w-100 h-100"></div></div>
          </div>
        </div>
      </a>
    </div>

    <div class="col-sm mb-1">
      <a href="letters/alphabetical" class="btn btn-light border border-3 border-success shadow w-100 h-100 YM">
        <h5>Alphabetical</h5>
        <div class="d-flex display-1">
          <div style="width:20%;">l</div>
          <div style="width:20%;">m</div>
          <div class="position-relative text-center" style="width:20%;">_<div class="text-danger position-absolute w-100 top-0">n </div></div>
          <div style="width:20%;">o</div>
          <div style="width:20%;">p</div>
        </div>
      </a>

    </div>
  </div>
  <div class="row">
    <div class="col-sm mb-1">
      <a href="letters/penmanship" class="btn btn-light border border-3 border-success shadow w-100 h-100 YM">
        <h5>Write</h5>
        <div class="penmanship shadow w-25 mx-auto">
          <img src="/image/abc/f.gif" class="img-fluid" 
               alt="f"
               onerror="altOnly(this)"></div>
      </a>
    </div>

    <div class="col-sm mb-1">
      <a href="https://school.bunkei.co.jp/digikyo/eigo/soragakiabc/?authuser=0" 
         class="btn btn-light border border-3 border-success shadow w-100 h-100">
         <img src="/image/abc/soragakiabc.jpg" class="img-fluid w-50" alt="soragaki" onerror="altOnly(this)">
      </a>
    </div>


    <div class="col-sm mb-1">
      <div class="text-center bg-light border border-3 border-success rounded-3 shadow w-100 h-100 YM">
        <h5>Letters and Sounds</h5>
        <span class="text-danger"><%- __('sound_on') %></span>
        <div class="d-flex justify-content-around p-3">

          <i class="material-icons text-success" style="font-size:4rem;text-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important">
            record_voice_over
          </i>

          <div class="pt-2">
            <div id="progress" class="radial-progress-bar shadow">
              <div class="right-half"></div>
              <div class="left-half-mask"></div>
              <div class="left-half"></div>
              <div class="inner-circle bg-light" style="background-image: none !important;"></div>
            </div>
          </div>

          <button id="startSRS" class="btn material-icons text-primary" style="font-size:4rem;text-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;">
            forward
          </button>

          <button id="resetSRS" class="btn btn-danger" style="display:none;">Reset</button>
        </div>
      </div>
    </div>


  </div>
</div>

<script type="text/javascript" src="/javascripts/progress.js"></script>

<script>
$(function(){
  $(`#letters-tab`).addClass("active");
  
  // Initialize progressPie selectors
  progressPie.leftHalf = document.querySelector(".left-half");
  progressPie.rightHalf = document.querySelector(".right-half");
  
  let ranks = JSON.parse(localStorage.getItem('abc_SRS')) 
              || [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];

  // get sum of ranks and update progress display
  let percent = progressToPercent(ranks, ranks.length * 5);
  
  if (percent >= 100){
    $("#startSRS").prop('disabled', true);
    $("#resetSRS").show();
  }


  $("#startSRS").on('click', ()=>{
    window.location.href = "letters/SRS";
  });

  $("#resetSRS").on('click', ()=>{
    localStorage.removeItem('abc_SRS');
    window.location.reload();
  });

});
</script>

<%- include('../foot.ejs') -%>
